apply plugin: 'konan'

konan.targets = ["iphone", "iphone_sim"]

konanArtifacts {
    library('http-client-native') {
        enableMultiplatform true
    }
/* publishing workaround
    program('native-test') {
        srcDir 'src/test/kotlin'
        commonSourceSet 'test'
        libraries {
            artifact 'http-client-native'
        }
        extraOpts '-tr'
    }
*/
}

afterEvaluate {
    apply from: project.file('../gradle/publish.gradle')
}

dependencies {
    expectedBy project(':common')
}

task test(dependsOn: run)
